!function(e){function o(r){if(t[r])return t[r].exports;var n=t[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}var t={};return o.m=e,o.c=t,o.p="",o(0)}([function(e,o,t){(function(o){var r=t(1),n=t(2),a=t(5),d=t(6),i=t(7),s=t(8),c=t(9),l=t(3),u=t(10),g=t(11),_=t(12),m=t(13),h=t(14),p=t(4),f="undefined"!=typeof window?window:o;f.$GV={core:{init:r,render:n,mutate:a},history:{reader:d,loop:i},input:{csv:s,json:c},layout:{"const":l,force:u,generic:g},view:{fullscreen:_,interaction:m,navigation:h,controlUI:p}},e.exports={$GV:f.$GV}}).call(o,function(){return this}())},function(e,o){var t={keys:{KEY_A:97,KEY_D:100,KEY_W:119,KEY_S:115,KEY_R:114,KEY_F:102,KEY_X:120,KEY_Y:121,KEY_C:99,KEY_SX:88,KEY_SY:89,KEY_SC:67},container:{element:document.querySelector("#main_vis"),WIDTH:1200,HEIGHT:800},defaults:{node_size:6,background_color:0,tranparent:!0,opacity:.5,linewidth:1,fov:70,near:.1,far:5e3,highlight_node_color:new THREE.Color(15854843),ZOOM_FACTOR:.05,MAX_FOV:100,MIN_FOV:20,delta_distance:10,delta_rotation:.05,randomColors:[12898523,16168586,16777011,16383,15475511,34628,16754432,1963814,9426465,2950299,8862675,8749919],bfs_gradient_end_color:9443907,bfs_gradient_middle_color:16774960,bfs_gradient_start_color:496135,edge_color:"#ff0000",node_color:"#ff0000",firefox_wheel_factor:-40,stop_fd:!1},globals:{mouse:new THREE.Vector2,graph_dims:{MIN_X:0,MAX_X:0,AVG_X:0,MIN_Y:0,MAX_Y:0,AVG_Y:0,MIN_Z:0,MAX_Z:0,AVG_Z:0},selected_node:null,TWO_D_MODE:!1,INTERSECTED:{index:0,color:new THREE.Color,node:null},raycaster:new THREE.Raycaster,renderer:new THREE.WebGLRenderer({antialias:!1}),scene:new THREE.Scene,network:new THREE.Group,camera:null},callbacks:{node_intersects:[]},force_layout:{fdLoop:null,fdStop:null,magnitude:2,speed:2}};e.exports=t},function(e,o,t){function r(){var e=e||window.graph;if(!e)throw new Error("No graph object present, unable to render anything.");window.nodes_obj&&window.node_keys||(window.nodes_obj=window.graph.getNodes(),window.node_keys=Object.keys(window.nodes_obj),window.und_edges=window.graph.getUndEdges(),window.und_edges_keys=Object.keys(window.und_edges),window.dir_edges=window.graph.getDirEdges(),window.dir_edges_keys=Object.keys(window.dir_edges)),d.renderGraph(e),window.requestAnimationFrame(n),i.setDirectionUnchecked(),console.log("rendering graph...")}function n(){a.renderer.render(a.scene,a.camera)}var a=(t(1).container,t(1).globals),d=t(3),i=t(4);e.exports={renderGraph:r,update:n}},function(e,o,t){function r(e){d.MIN_X=d.MAX_X=nodes_obj[0].getFeature("coords").x,d.MIN_Y=d.MAX_Y=nodes_obj[0].getFeature("coords").y,d.MIN_Z=d.MAX_Z=nodes_obj[0].getFeature("coords").z;for(node in nodes_obj){var o=nodes_obj[node].getFeature("coords").x,t=nodes_obj[node].getFeature("coords").y,r=nodes_obj[node].getFeature("coords").z;d.MIN_X=Math.min(d.MIN_X,o),d.MIN_Y=Math.min(d.MIN_Y,t),d.MIN_Z=Math.min(d.MIN_Z,r),d.MAX_X=Math.max(d.MAX_X,o),d.MAX_Y=Math.max(d.MAX_Y,t),d.MAX_Z=Math.max(d.MAX_Z,r)}d.AVG_X=(d.MAX_X-d.MIN_X)/2,d.AVG_Y=(d.MAX_Y-d.MIN_Y)/2,d.AVG_Z=(d.MAX_Z-d.MIN_Z)/2,i.renderer.setSize(n.WIDTH,n.HEIGHT),i.renderer.setClearColor(a.background_color,1);var l=document.getElementById("containerGraph");l.appendChild(i.renderer.domElement);var u=0,g=new Float32Array(3*e.nrNodes()),_=new Float32Array(3*e.nrNodes()),m=new Float32Array(e.nrNodes());for(node in nodes_obj){var o=nodes_obj[node].getFeature("coords").x,t=nodes_obj[node].getFeature("coords").y,r=nodes_obj[node].getFeature("coords").z;g[3*u]=o-d.AVG_X,g[3*u+1]=t-d.AVG_Y,g[3*u+2]=r-d.AVG_Z,_[3*u]=nodes_obj[node].getFeature("color").r/256,_[3*u+1]=nodes_obj[node].getFeature("color").g/256,_[3*u+2]=nodes_obj[node].getFeature("color").b/256,m[u]=6,s[node]=3*u,u++}var h=new THREE.BufferGeometry;h.addAttribute("position",new THREE.BufferAttribute(g,3)),h.addAttribute("color",new THREE.BufferAttribute(_,3)),h.addAttribute("size",new THREE.BufferAttribute(m,1));var p=new THREE.PointsMaterial({vertexColors:THREE.VertexColors,size:a.node_size}),f=new THREE.Points(h,p);i.network.add(f);var y=new THREE.LineBasicMaterial({transparent:a.tranparent,opacity:a.opacity,vertexColors:THREE.VertexColors,linewidth:a.linewidth});[und_edges,dir_edges].forEach(function(e){var o=0,t=new Float32Array(6*Object.keys(e).length),r=new Float32Array(t.length);for(var n in e){var a=e[n],s=a._node_a.getID(),l=a._node_b.getID();t[6*o]=nodes_obj[s].getFeature("coords").x-d.AVG_X,t[6*o+1]=nodes_obj[s].getFeature("coords").y-d.AVG_Y,t[6*o+2]=nodes_obj[s].getFeature("coords").z-d.AVG_Z,t[6*o+3]=nodes_obj[l].getFeature("coords").x-d.AVG_X,t[6*o+4]=nodes_obj[l].getFeature("coords").y-d.AVG_Y,t[6*o+5]=nodes_obj[l].getFeature("coords").z-d.AVG_Z,r[6*o]=nodes_obj[s].getFeature("color").r/256,r[6*o+1]=nodes_obj[s].getFeature("color").g/256,r[6*o+2]=nodes_obj[s].getFeature("color").b/256,r[6*o+3]=nodes_obj[l].getFeature("color").r/256,r[6*o+4]=nodes_obj[l].getFeature("color").g/256,r[6*o+5]=nodes_obj[l].getFeature("color").b/256,c[n]=6*o,o++}var u=new THREE.BufferGeometry;u.addAttribute("position",new THREE.BufferAttribute(t,3)),u.addAttribute("color",new THREE.BufferAttribute(r,3));var g=new THREE.LineSegments(u,y);i.network.add(g)}),i.scene.add(i.network),i.camera.position.z=Math.max(d.MAX_X,d.MAX_Y)}var n=t(1).container,a=t(1).defaults,d=t(1).globals.graph_dims,i=t(1).globals,s={},c={};i.camera=new THREE.PerspectiveCamera(a.fov,n.WIDTH/n.HEIGHT,a.near,a.far),e.exports={renderGraph:r,nodes_obj_idx:s,edges_obj_idx:c}},function(e,o,t){function r(){document.querySelector("#directed").checked=!1,document.querySelector("#undirected").checked=!1}function n(){document.querySelector("#myonoffswitch").checked?(document.querySelector("#updateAllNodesButton").style.visibility="visible",document.querySelector("#chosenHideNodeButton").style.visibility="visible",document.querySelector("#chosenUpdateNodeButton").style.visibility="visible",a.fdStop()):(document.querySelector("#updateAllNodesButton").style.visibility="hidden",document.querySelector("#chosenHideNodeButton").style.visibility="hidden",document.querySelector("#chosenUpdateNodeButton").style.visibility="hidden",a.fdLoop())}var a=t(1).force_layout;1==localStorage.getItem("directed")?(document.querySelector("#directed").checked=!0,document.querySelector("#undirected").checked=!1):(document.querySelector("#directed").checked=!1,document.querySelector("#undirected").checked=!0),directed.onclick=function(){localStorage.setItem("directed",Number(1)),window.location.reload()},undirected.onclick=function(){localStorage.setItem("directed",Number(0)),window.location.reload()},document.querySelector("#force_magnitude").addEventListener("input",function(e){var o=+document.querySelector("#force_magnitude").value;a.magnitude=o,document.querySelector("#force_mag_display").innerHTML=o}),document.querySelector("#force_speed").addEventListener("input",function(e){var o=+document.querySelector("#force_speed").value;a.speed=o,document.querySelector("#force_speed_display").innerHTML=o}),e.exports={startStopForce:n,setDirectionUnchecked:r}},function(e,o,t){function r(e){for(var o=E.children[0].geometry.getAttribute("position").array,t=E.children[0].geometry.getAttribute("color").array,r=new Float32Array(o.length+3),n=new Float32Array(r.length),a=new THREE.Color(16741235),d=0;d<o.length;d++)r[d]=o[d],n[d]=t[d];r[r.length-3]=e.getFeature("coords").x,r[r.length-2]=e.getFeature("coords").y,r[r.length-1]=e.getFeature("coords").z,n[r.length-3]=a.r,n[r.length-2]=a.g,n[r.length-1]=a.b,v.TWO_D_MODE&&(r[r.length-1]=0),A[e.getID()]=o.length,E.children[0].geometry.addAttribute("position",new THREE.BufferAttribute(r,3)),E.children[0].geometry.addAttribute("color",new THREE.BufferAttribute(n,3)),E.children[0].geometry.attributes.position.needsUpdate=!0,E.children[0].geometry.attributes.color.needsUpdate=!0,window.requestAnimationFrame(w)}function n(){var e=Math.floor(Math.random()*x.MAX_X-x.AVG_X),o=Math.floor(Math.random()*x.MAX_Y-x.AVG_Y),t=Math.floor(Math.random()*x.MAX_Z-x.AVG_Z),n=Object.keys(A).length;v.TWO_D_MODE&&(t=0);var a=graph.addNode(n,{coords:{x:e,y:o,z:t}});r(a)}function a(e){var o=e.getID(),t=A[o],r=E.children[0].geometry.getAttribute("position").array;r[t]=NaN,r[t+1]=NaN,r[t+2]=NaN;var n=[E.children[1].geometry.getAttribute("position").array,e.undEdges()],a={};for(var d in e.inEdges())a[d]=e.inEdges()[d];for(var d in e.outEdges())a[d]=e.outEdges()[d];var i=[E.children[2].geometry.getAttribute("position").array,a];[n,i].forEach(function(e){for(var o=e[0],t=e[1],r=0;r<Object.keys(t).length;r++){var n=t[Object.keys(t)[r]],a=F[n.getID()];o[a]=NaN,o[a+1]=NaN,o[a+2]=NaN,o[a+3]=NaN,o[a+4]=NaN,o[a+5]=NaN}}),E.children[0].geometry.attributes.position.needsUpdate=!0,E.children[1].geometry.attributes.position.needsUpdate=!0,E.children[2].geometry.attributes.position.needsUpdate=!0,window.requestAnimationFrame(w)}function d(e){var o=1;e._directed&&(o=2);for(var t=E.children[o].geometry.getAttribute("position").array,r=E.children[o].geometry.getAttribute("color").array,n=new Float32Array(t.length+6),a=new Float32Array(r.length+6),d=new THREE.Color(M.edge_color),i=0;i<t.length;i++)n[i]=t[i],a[i]=r[i];n[n.length-6]=e._node_a.getFeature("coords").x,n[n.length-5]=e._node_a.getFeature("coords").y,n[n.length-4]=e._node_a.getFeature("coords").z,n[n.length-3]=e._node_b.getFeature("coords").x,n[n.length-2]=e._node_b.getFeature("coords").y,n[n.length-1]=e._node_b.getFeature("coords").z,a[a.length-6]=d.r,a[a.length-5]=d.g,a[a.length-4]=d.b,a[a.length-3]=d.r,a[a.length-2]=d.g,a[a.length-1]=d.b,E.children[o].geometry.addAttribute("position",new THREE.BufferAttribute(n,3)),E.children[o].geometry.addAttribute("color",new THREE.BufferAttribute(a,3)),E.children[o].geometry.attributes.position.needsUpdate=!0,E.children[o].geometry.attributes.color.needsUpdate=!0,window.requestAnimationFrame(w)}function i(e,o){var t=new THREE.Color(o||M.node_color),r=E.children[0].geometry.getAttribute("color").array,n=e.getID(),a=A[n];r[a]=t.r,r[a+1]=t.g,r[a+2]=t.b,E.children[0].geometry.attributes.color.needsUpdate=!0}function s(e){if(0==e){var o=Math.floor(Math.random()*M.randomColors.length);e=M.randomColors[o]}for(var t=new THREE.Color(e),r=E.children[0].geometry.getAttribute("color").array,n=0;n<r.length;)r[n]=t.r,r[n+1]=t.g,r[n+2]=t.b,n+=3;E.children[0].geometry.attributes.color.needsUpdate=!0,window.requestAnimationFrame(w)}function c(e,o,t){var r=new THREE.Color(o||M.edge_color),n=new THREE.Color(t||M.edge_color),a=1;e._directed&&(a=2);var d=E.children[a].geometry.getAttribute("color").array,i=e.getID(),s=F[i];d[s]=r.r,d[s+1]=r.g,d[s+2]=r.b,d[s+3]=n.r,d[s+4]=n.g,d[s+5]=n.b,E.children[a].geometry.attributes.color.needsUpdate=!0}function l(e){if(0==e){var o=Math.floor(Math.random()*M.randomColors.length);e=M.randomColors[o]}var t=new THREE.Color(e),r=E.children[1].geometry.getAttribute("color").array,n=E.children[2].geometry.getAttribute("color").array;[r,n].forEach(function(e){for(var o=0;o<e.length;)e[o]=t.r,e[o+1]=t.g,e[o+2]=t.b,o+=3}),E.children[1].geometry.attributes.color.needsUpdate=!0,E.children[2].geometry.attributes.color.needsUpdate=!0,window.requestAnimationFrame(w)}function u(e){var o=null!=e?e:graph.getRandomNode(),t=$G.search.BFS(graph,o);h(t)}function g(){console.log("Selected node:"),console.dir(v.selected_node),u(v.selected_node)}function _(e){var o=null!=e?e:graph.getRandomNode(),t=$G.search.PFS(graph,o);h(t)}function m(){console.log("Selected node:"),console.dir(v.selected_node),_(v.selected_node)}function h(e){T={};var o=0;for(index in e)e[index].distance!==Number.POSITIVE_INFINITY&&(o=Math.max(o,e[index].distance));for(var t=new THREE.Color(M.bfs_gradient_start_color),r=new THREE.Color(M.bfs_gradient_middle_color),n=new THREE.Color(M.bfs_gradient_end_color),a=[],d=t,s=r,l=o/2,u=0;o>=u;u++){u>l&&(d=r,s=n);var g=u%l?u%l:(u-1)%l,_=new THREE.Color;_.r=d.r+(s.r-d.r)/l*g,_.g=d.g+(s.g-d.g)/l*g,_.b=d.b+(s.b-d.b)/l*g,a.push(_)}for(index in e){var m="#ffffff";if(e[index].distance!==Number.POSITIVE_INFINITY){if((0|e[index].distance)<0)throw new Error("Negative distances are not supported yet!");m=a[0|e[index].distance].getHex()}i(graph.getNodeById(index),m),T[index]=m}[und_edges,dir_edges].forEach(function(e){for(edge_index in e){var o=e[edge_index],t=o._node_a.getID(),r=o._node_b.getID();"undefined"!==T[t]&&"undefined"!==T[r]&&c(o,T[t],T[r])}}),window.requestAnimationFrame(w)}function p(e){T={};var o=graph.getRandomNode(),t=[];null!=e&&(o=e);for(var r=$G.search.DFS(graph,o),n=0;n<r.length;n++){var a=new THREE.Color;a.r=Math.floor(256*Math.random())/256,a.g=Math.floor(256*Math.random())/256,a.b=Math.floor(256*Math.random())/256,t.push(a.getHex())}for(var n=0;n<r.length;n++)for(index in r[n])i(graph.getNodeById(index),t[n]),T[index]=t[n];[und_edges,dir_edges].forEach(function(e){for(edge_index in e){var o=e[edge_index],t=o._node_a.getID(),r=o._node_b.getID();"undefined"!==T[t]&&"undefined"!==T[r]&&c(o,T[t],T[r])}}),window.requestAnimationFrame(w)}function f(){console.log("Selected node:"),console.dir(v.selected_node),p(v.selected_node)}function y(){a(v.selected_node)}function b(){var e=Math.floor(Math.random()*M.randomColors.length),o=M.randomColors[e];i(v.selected_node,o),window.requestAnimationFrame(w)}var E=t(1).globals.network,w=t(2).update,A=t(3).nodes_obj_idx,F=t(3).edges_obj_idx,v=t(1).globals,x=t(1).globals.graph_dims,M=t(1).defaults,T={};e.exports={addNode:r,addRandomNodes:n,hideNode:a,hideNodeClick:y,addEdge:d,colorSingleNode:i,colorSingleNodeClick:b,colorAllNodes:s,colorSingleEdge:c,colorAllEdges:l,colorBFS:u,colorDFS:p,colorPFS:_,colorBFSclick:g,colorDFSclick:f,colorPFSclick:m}},function(e,o){},function(e,o){function t(){window.requestAnimationFrame(t)}window.requestAnimationFrame(t)},function(e,o){},function(e,o){function t(e,o,t,r){var o="undefined"==typeof o?!1:o,t="undefined"==typeof t?!1:t,r="undefined"==typeof r?!1:r;t=!document.querySelector("#undirected").checked;var n=new $G.input.JsonInput(o,t,r);!window.File&&window.FileReader&&window.FileList&&window.Blob&&alert("Browser does not support the File API.");var a=document.getElementById("input").files;if(!a.length)return void alert("No file selected.");if(splitFileName=a[0].name.split("."),!splitFileName.pop().match("json"))return void alert("Invalid file type - it must be a json file.");var d=new FileReader,i=null;return d.onloadend=function(e){if(e.target.readyState==FileReader.DONE){var o=JSON.parse(e.target.result);window.graph=n.readFromJSON(o),document.querySelector("#nodes").innerHTML=o.nodes,document.querySelector("#edges").innerHTML=o.edges,i=o.data}},d.readAsText(a[0]),i}e.exports={readJSON:t}},function(e,o,t){function r(){p&&n(),s.stop_fd?p=!0:(a(),window.requestAnimationFrame(r))}function n(){h=+new Date,f=new Float32Array(3*graph.nrNodes());var e=graph.getNodes(),o=0,t=b?u.AVG_X:0,r=b?u.AVG_Y:0,n=b?u.AVG_Z:0;b=!1;for(node in nodes_obj)f[o]=e[node].getFeature("coords").x-t,f[o+1]=e[node].getFeature("coords").y-r,f[o+2]=e[node].getFeature("coords").z-n,o+=3;p=!1,s.stop_fd=!1,y=new Float32Array(3*graph.nrNodes()),o=0;for(node in nodes_obj)y[o]=100*Math.random()-50,y[o+1]=100*Math.random()-50,y[o+2]=100*Math.random()-50,o+=3}function a(){var e=+new Date-h,o=graph.getNodes(),t=l.children[0].geometry.getAttribute("position").array;for(node in o){var r=m[node];o[node].getFeature("coords").x=f[r]+Math.sin(e*g.speed/1e3)*y[r]*g.magnitude,o[node].getFeature("coords").y=f[r+1]+Math.sin(e*g.speed/1e3)*y[r+1]*g.magnitude,o[node].getFeature("coords").z=f[r+2]+Math.sin(e*g.speed/1e3)*y[r+2]*g.magnitude,t[r]=o[node].getFeature("coords").x,t[r+1]=o[node].getFeature("coords").y,c.TWO_D_MODE?t[r+2]=0:t[r+2]=o[node].getFeature("coords").z}var n=[l.children[1].geometry.getAttribute("position").array,graph.getUndEdges()],a=[l.children[2].geometry.getAttribute("position").array,graph.getDirEdges()];[n,a].forEach(function(e){var t=0,r=e[0],n=e[1];for(var a in n){var d=n[a],i=d._node_a.getID(),s=d._node_b.getID();r[t]=o[i].getFeature("coords").x,r[t+1]=o[i].getFeature("coords").y,r[t+3]=o[s].getFeature("coords").x,r[t+4]=o[s].getFeature("coords").y,c.TWO_D_MODE?(r[t+2]=0,r[t+5]=0):(r[t+2]=o[i].getFeature("coords").z,r[t+5]=o[s].getFeature("coords").z),t+=6}}),l.children[0].geometry.attributes.position.needsUpdate=!0,l.children[1].geometry.attributes.position.needsUpdate=!0,l.children[2].geometry.attributes.position.needsUpdate=!0,window.requestAnimationFrame(_)}function d(){s.stop_fd=!0}var i=t(1),s=i.defaults,c=i.globals,l=c.network,u=c.graph_dims,g=i.force_layout,_=t(2).update,m=t(3).nodes_obj_idx,h=null,p=!0,f=null,y=null,b=!0;g.fdLoop=r,g.fdStop=d},function(e,o){},function(e,o){function t(e){var o=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled;o?(o.style.width="100%",o.style.height="100%"):(r.el.style.width=r.width+"px",r.el.style.height=r.height+"px")}var r={el:null,width:null,height:null};document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("MSFullscreenChange",t)},function(e,o,t){function r(e){var o=e.getID(),t=_[o],r=u.children[0].geometry.getAttribute("position").array;r[t]=e.getFeature("coords").x,r[t+1]=e.getFeature("coords").y,r[t+2]=e.getFeature("coords").z,y.TWO_D_MODE&&(r[t+2]=0),u.children[0].geometry.attributes.position.needsUpdate=!0;var n=[u.children[1].geometry.getAttribute("position").array,e.undEdges()],a={};for(var d in e.inEdges())a[d]=e.inEdges()[d];for(var d in e.outEdges())a[d]=e.outEdges()[d];var i=[u.children[2].geometry.getAttribute("position").array,a];[n,i].forEach(function(o){for(var r=o[0],n=o[1],a=0;a<Object.keys(n).length;a++){var d=n[Object.keys(n)[a]],i=m[d.getID()];d._node_a===e?(r[i]=e.getFeature("coords").x,r[i+1]=e.getFeature("coords").y,r[i+2]=e.getFeature("coords").z):d._node_b===e&&(r[i+3]=e.getFeature("coords").x,r[i+4]=e.getFeature("coords").y,r[i+5]=e.getFeature("coords").z),y.TWO_D_MODE&&(r[t+2]=0,r[t+5]=0)}}),u.children[1].geometry.attributes.position.needsUpdate=!0,u.children[2].geometry.attributes.position.needsUpdate=!0,window.requestAnimationFrame(g)}function n(){window.old_coordinates=new Float32Array(3*graph.nrNodes());var e=graph.getNodes(),o=0;for(node in nodes_obj)old_coordinates[o]=e[node].getFeature("coords").x,old_coordinates[o+1]=e[node].getFeature("coords").y,old_coordinates[o+2]=e[node].getFeature("coords").z,y.TWO_D_MODE&&(old_coordinates[o+2]=0),o+=3;window.cnt=0,requestAnimationFrame(a)}function a(){var e=graph.getNodes(),o=u.children[0].geometry.getAttribute("position").array;for(node in e){var t=_[node];e[node].getFeature("coords").x=old_coordinates[t]+20*Math.random()-10-h.AVG_X,e[node].getFeature("coords").y=old_coordinates[t+1]+20*Math.random()-10-h.AVG_Y,e[node].getFeature("coords").z=old_coordinates[t+2]+20*Math.random()-10-h.AVG_Z,y.TWO_D_MODE&&(e[node].getFeature("coords").z=0),o[t]=e[node].getFeature("coords").x,o[t+1]=e[node].getFeature("coords").y,o[t+2]=e[node].getFeature("coords").z}var r=[u.children[1].geometry.getAttribute("position").array,graph.getUndEdges()],n=[u.children[2].geometry.getAttribute("position").array,graph.getDirEdges()];if([r,n].forEach(function(o){var t=0,r=o[0],n=o[1];for(var a in n){var d=n[a],i=d._node_a.getID(),s=d._node_b.getID();r[t]=e[i].getFeature("coords").x,r[t+1]=e[i].getFeature("coords").y,r[t+2]=e[i].getFeature("coords").z,r[t+3]=e[s].getFeature("coords").x,r[t+4]=e[s].getFeature("coords").y,r[t+5]=e[s].getFeature("coords").z,t+=6}}),u.children[0].geometry.attributes.position.needsUpdate=!0,u.children[1].geometry.attributes.position.needsUpdate=!0,u.children[2].geometry.attributes.position.needsUpdate=!0,window.requestAnimationFrame(g),window.cnt++<100)requestAnimationFrame(a);else{var d=0;for(node in e){var t=_[node];e[node].getFeature("coords").x=window.old_coordinates[d],e[node].getFeature("coords").y=window.old_coordinates[d+1],e[node].getFeature("coords").z=window.old_coordinates[d+2],d+=3,o[t]=e[node].getFeature("coords").x-h.AVG_X,o[t+1]=e[node].getFeature("coords").y-h.AVG_Y,o[t+2]=e[node].getFeature("coords").z-h.AVG_Z,y.TWO_D_MODE&&(o[t+2]=0)}[r,n].forEach(function(o){var t=0,r=o[0],n=o[1];for(var a in n){var d=n[a],i=d._node_a.getID(),s=d._node_b.getID();r[t]=e[i].getFeature("coords").x-h.AVG_X,r[t+1]=e[i].getFeature("coords").y-h.AVG_Y,r[t+2]=e[i].getFeature("coords").z-h.AVG_Z,r[t+3]=e[s].getFeature("coords").x-h.AVG_X,r[t+4]=e[s].getFeature("coords").y-h.AVG_Y,r[t+5]=e[s].getFeature("coords").z-h.AVG_Z,y.TWO_D_MODE&&(r[t+2]=0,r[t+5]=0),t+=6}}),u.children[0].geometry.attributes.position.needsUpdate=!0,u.children[1].geometry.attributes.position.needsUpdate=!0,u.children[2].geometry.attributes.position.needsUpdate=!0,window.requestAnimationFrame(g)}}function d(){y.TWO_D_MODE=!0;var e=u.children[0].geometry.attributes.position.array,o=u.children[1].geometry.attributes.position.array,t=u.children[2].geometry.attributes.position.array;[e,o,t].forEach(function(e){for(var o=0;o<e.length;)e[o+2]=0,o+=3}),u.children[0].geometry.attributes.position.needsUpdate=!0,u.children[1].geometry.attributes.position.needsUpdate=!0,u.children[2].geometry.attributes.position.needsUpdate=!0,window.requestAnimationFrame(g)}function i(){y.TWO_D_MODE=!1;var e=0,o=u.children[0].geometry.attributes.position.array;for(node in nodes_obj){var t=nodes_obj[node].getFeature("coords").z;o[e+2]=t,e+=3}e=0,o=u.children[1].geometry.attributes.position.array;for(var r in und_edges){var n=und_edges[r],a=n._node_a.getID(),d=n._node_b.getID();o[e+2]=nodes_obj[a].getFeature("coords").z,o[e+5]=nodes_obj[d].getFeature("coords").z,e+=6}e=0,o=u.children[2].geometry.attributes.position.array;for(var r in dir_edges){var n=dir_edges[r],a=n._node_a.getID(),d=n._node_b.getID();o[e+2]=nodes_obj[a].getFeature("coords").z,o[e+5]=nodes_obj[d].getFeature("coords").z,e+=6}u.children[0].geometry.attributes.position.needsUpdate=!0,u.children[1].geometry.attributes.position.needsUpdate=!0,u.children[2].geometry.attributes.position.needsUpdate=!0,window.requestAnimationFrame(g)}function s(){var e=u.children[0].geometry.attributes;y.raycaster.setFromCamera(p,y.camera),y.raycaster.params.Points.threshold=1;var o=[];o.push(u.children[0]);var t=y.raycaster.intersectObjects(o);if(t.length>0&&t[0].index!=y.INTERSECTED.index){e.color.array[3*y.INTERSECTED.index]=y.INTERSECTED.color.r,e.color.array[3*y.INTERSECTED.index+1]=y.INTERSECTED.color.g,e.color.array[3*y.INTERSECTED.index+2]=y.INTERSECTED.color.b,y.INTERSECTED.index=t[0].index,y.INTERSECTED.color.setRGB(e.color.array[3*t[0].index],e.color.array[3*t[0].index+1],e.color.array[3*t[0].index+2]),e.color.array[3*t[0].index]=f.highlight_node_color.r,e.color.array[3*t[0].index+1]=f.highlight_node_color.g,e.color.array[3*t[0].index+2]=f.highlight_node_color.b,e.color.needsUpdate=!0;var r=Object.keys(_)[t[0].index];y.INTERSECTED.node=window.graph.getNodeById(r)}}function c(){y.selected_node._features.coords.x=Math.floor(Math.random()*h.MAX_X-h.AVG_X),y.selected_node._features.coords.y=Math.floor(Math.random()*h.MAX_Y-h.AVG_Y),y.selected_node._features.coords.z=Math.floor(Math.random()*h.MAX_Z-h.AVG_Z),r(y.selected_node)}function l(e){document.querySelector("#myonoffswitch").checked||y.rendererForceDirectedGraph.forEachNode(function(o){o.size=e})}var u=t(1).globals.network,g=t(2).update,_=t(3).nodes_obj_idx,m=t(3).edges_obj_idx,h=t(1).globals.graph_dims,p=t(1).globals.mouse,f=t(1).defaults,y=t(1).globals;e.exports={updateNodePosition:r,updateAll:n,updateNodePositionClick:c,switchTo2D:d,switchTo3D:i,nodeIntersection:s,changeNodeSize:l}},function(e,o,t){function r(e){switch(e.charCode){case i.KEY_W:s.camera.position.y=s.camera.position.y-c.delta_distance;break;case i.KEY_S:s.camera.position.y=s.camera.position.y+c.delta_distance;break;case i.KEY_A:s.camera.position.x=s.camera.position.x+c.delta_distance;break;case i.KEY_D:s.camera.position.x=s.camera.position.x-c.delta_distance;break;case i.KEY_R:u.translateZ(c.delta_distance);break;case i.KEY_F:u.translateZ(-c.delta_distance);break;case i.KEY_X:u.rotateOnAxis(f,c.delta_rotation),y.applyAxisAngle(f,-c.delta_rotation);break;case i.KEY_SX:u.rotateOnAxis(f,-c.delta_rotation),y.applyAxisAngle(f,c.delta_rotation);break;case i.KEY_Y:u.rotateOnAxis(y,c.delta_rotation),f.applyAxisAngle(y,-c.delta_rotation);break;case i.KEY_SY:u.rotateOnAxis(y,-c.delta_rotation),f.applyAxisAngle(y,c.delta_rotation);break;case i.KEY_C:u.rotateOnAxis(b,c.delta_rotation),f.applyAxisAngle(b,-c.delta_rotation),y.applyAxisAngle(b,-c.delta_rotation);break;case i.KEY_SC:u.rotateOnAxis(b,-c.delta_rotation),f.applyAxisAngle(b,c.delta_rotation),y.applyAxisAngle(b,c.delta_rotation)}window.requestAnimationFrame(l)}function n(e){var o=e.wheelDelta;"undefined"!=typeof InstallTrigger&&(o=e.deltaY*c.firefox_wheel_factor),e.altKey?0>o?(u.rotateOnAxis(y,-c.delta_rotation),f.applyAxisAngle(y,c.delta_rotation)):(u.rotateOnAxis(y,c.delta_rotation),f.applyAxisAngle(y,-c.delta_rotation)):(s.camera.fov-=c.ZOOM_FACTOR*o,s.camera.fov=Math.max(Math.min(s.camera.fov,c.MAX_FOV),c.MIN_FOV),s.camera.projectionMatrix=(new THREE.Matrix4).makePerspective(s.camera.fov,g.WIDTH/g.HEIGHT,s.camera.near,s.camera.far)),window.requestAnimationFrame(l)}function a(e){if(e.shiftKey&&1==e.buttons)e.movementX>0?(u.rotateOnAxis(b,c.delta_rotation),f.applyAxisAngle(b,-c.delta_rotation),y.applyAxisAngle(b,-c.delta_rotation)):e.movementX<0?(u.rotateOnAxis(b,-c.delta_rotation),f.applyAxisAngle(b,c.delta_rotation),y.applyAxisAngle(b,c.delta_rotation)):e.movementY>0?(u.rotateOnAxis(f,c.delta_rotation),y.applyAxisAngle(f,-c.delta_rotation)):e.movementY<0&&(u.rotateOnAxis(f,-c.delta_rotation),y.applyAxisAngle(f,c.delta_rotation));else if(1==e.buttons){var o=e.clientX/g.WIDTH,t=e.clientY/g.HEIGHT,r=(g.WIDTH/2-s.graph_dims.MAX_X/2,s.graph_dims.MAX_X),n=s.graph_dims.MAX_Y;s.camera.position.x>r?s.camera.position.x=r:s.camera.position.x<-r?s.camera.position.x=-r:s.camera.position.y>n?s.camera.position.y=n:s.camera.position.y<-n&&(s.camera.position.y=-n),s.camera.position.x=s.camera.position.x-o*e.movementX,s.camera.position.y=s.camera.position.y+t*e.movementY}e.preventDefault();var a=document.querySelector("#containerGraph"),d=a.getBoundingClientRect();_.x=(e.clientX-d.left)/g.WIDTH*2-1,_.y=2*-((e.clientY-d.top)/g.HEIGHT)+1,null!=u.children[0]&&window.requestAnimationFrame(m),window.requestAnimationFrame(l)}function d(e){if(null!=s.INTERSECTED.node){console.log(s.INTERSECTED.node),s.selected_node=s.INTERSECTED.node,document.querySelector("#nodeInfo").style.visibility="visible";var o=h.node_intersects;for(var t in o)"function"==typeof o[t]&&o[t](s.INTERSECTED.node)}}var i=t(1).keys,s=t(1).globals,c=t(1).defaults,l=t(2).update,u=t(1).globals.network,g=t(1).container,_=t(1).globals.mouse,m=t(13).nodeIntersection,h=t(1).callbacks,p=function(e){document.querySelector("#nodeID").innerHTML=e._id};h.node_intersects.push(p);var f=new THREE.Vector3(1,0,0),y=new THREE.Vector3(0,1,0),b=new THREE.Vector3(0,0,1);window.addEventListener("keypress",r,!1);var E="mousewheel";"undefined"!=typeof InstallTrigger&&(E="wheel"),g.element.addEventListener(E,n,!1),g.element.addEventListener("mousemove",a,!1),g.element.addEventListener("click",d,!1),e.exports={mouse:_}}]);